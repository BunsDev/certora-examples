{"treeViewPath":{"ruleName":"integrityOfDeposit","assertId":null,"assertMessage":null,"next":{"ruleName":null,"assertId":9,"assertMessage":"\"deposit must increase the underlying balance of the pool\"","next":null}},"graph_link":"Report-integrityOfDeposit-example1.html","jumpToDefinition":[{"file":"certora/specs/pool_havoc.spec","line":29,"col":0}],"result":"VIOLATED","assertMessage":"\"deposit must increase the underlying balance of the pool\"","callResolution":[],"callResolutionWarnings":[{"caller":{"name":"Pool.assetBalance()","jumpToDefinition":[]},"callSite":{"snippet":"asset.balanceOf(address(this))","jumpToDefinition":[{"file":"Pool.sol","line":81,"col":0}]},"summary":"AUTO havoc","comments":[{"callee resolution":"callee contract unresolved; callee sighash resolved"},{"callee resolution hint (1)":"To resolve the call, try '--link Pool:asset=[Pool]'"},{"havoc cause":"The Prover could not resolve the callee, thus, havoc'd the call"},{"havoc scope":"only the return value"},{"summary application reason":"chosen automatically by the Prover"}],"callee":{"name":"[?].balanceOf(address)","jumpToDefinition":[]},"isInCounterExample":true},{"caller":{"name":"Pool.deposit(uint256)","jumpToDefinition":[]},"callSite":{"snippet":"asset.balanceOf(address(this))","jumpToDefinition":[{"file":"Pool.sol","line":44,"col":0}]},"summary":"AUTO havoc","comments":[{"callee resolution":"callee contract unresolved; callee sighash resolved"},{"callee resolution hint (1)":"To resolve the call, try '--link Pool:asset=[Pool]'"},{"havoc cause":"The Prover could not resolve the callee, thus, havoc'd the call"},{"havoc scope":"only the return value"},{"summary application reason":"chosen automatically by the Prover"}],"callee":{"name":"[?].balanceOf(address)","jumpToDefinition":[]},"isInCounterExample":true},{"caller":{"name":"Pool.deposit(uint256)","jumpToDefinition":[]},"callSite":{"snippet":"asset.balanceOf(address(this))","jumpToDefinition":[{"file":"Pool.sol","line":39,"col":0}]},"summary":"AUTO havoc","comments":[{"callee resolution":"callee contract unresolved; callee sighash resolved"},{"callee resolution hint (1)":"To resolve the call, try '--link Pool:asset=[Pool]'"},{"havoc cause":"The Prover could not resolve the callee, thus, havoc'd the call"},{"havoc scope":"only the return value"},{"summary application reason":"chosen automatically by the Prover"}],"callee":{"name":"[?].balanceOf(address)","jumpToDefinition":[]},"isInCounterExample":true},{"caller":{"name":"Pool.deposit(uint256)","jumpToDefinition":[]},"callSite":{"snippet":"asset.transferFrom(msg.sender,address(this),amount)","jumpToDefinition":[{"file":"Pool.sol","line":52,"col":0}]},"summary":"AUTO havoc","comments":[{"callee resolution":"callee contract unresolved; callee sighash resolved"},{"callee resolution hint (1)":"To resolve the call, try '--link Pool:asset=[Pool]'"},{"havoc cause":"The Prover could not resolve the callee, thus, havoc'd the call"},{"havoc scope":"all contracts except Pool (ce4604a0000000000000000000000007)"},{"summary application reason":"chosen automatically by the Prover"}],"callee":{"name":"[?].transferFrom(address,address,uint256)","jumpToDefinition":[]},"isInCounterExample":true}],"callTrace":{"name":"integrityOfDeposit","status":"","childrenList":[{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 0","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_status: 0","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_totalSupply: 9","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":1},{"name":"Setup","status":"","childrenList":[{"name":"multi contract setup","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"rule parameters setup","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"contract address vars initialized","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"setup read tracking instrumentation","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"last storage initialize","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"assumptions about extcodesize","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"assumptions about contracts' addresses","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"assumptions about starting balances","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"assumptions about static addresses","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"assumptions about uniqueness of contracts' addressses","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"record starting nonces","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"cloned contracts have no balances","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Linked immutable setup","status":"","childrenList":[],"jumpToDefinition":[]}],"jumpToDefinition":[]},{"name":"balance_before = Pool.assetBalance()","status":"","childrenList":[{"name":"Pool.assetBalance()","status":"SUCCESS","childrenList":[{"name":"(internal) Pool.assetBalance()","status":"","childrenList":[{"name":"Load from Pool.asset: identity (0x978bbdb8)","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"balanceOf(address): UNRESOLVED AUTO summary @ unknownLocation","status":"DEFAULT HAVOC","childrenList":[],"jumpToDefinition":[],"returnValue":"","variables":[]},{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 0","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_status: 0","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_totalSupply: 9","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":2}],"jumpToDefinition":[],"returnValue":"15","variables":[]}],"jumpToDefinition":[],"returnValue":"15","variables":[]}],"jumpToDefinition":[]},{"name":"require e.msg.sender != currentContract","status":"","childrenList":[{"name":"e.msg.sender != currentContract","status":"","childrenList":[{"name":"e.msg.sender == currentContract","status":"","childrenList":[{"name":"e.msg.sender","status":"","childrenList":[],"jumpToDefinition":[],"returnValue":"*","variables":[]},{"name":"currentContract","status":"","childrenList":[],"jumpToDefinition":[],"returnValue":"*","variables":[]}],"jumpToDefinition":[],"returnValue":"false","variables":[]}],"jumpToDefinition":[],"returnValue":"true","variables":[]}],"jumpToDefinition":[]},{"name":"Pool.deposit(e, amount)","status":"","childrenList":[{"name":"Pool.deposit(amount=X)","status":"SUCCESS","childrenList":[{"name":"sender: 0xffff; receiver: identity (0x978bbdb8); transferred amount: 0","status":"TRANSFER","childrenList":[{"name":"Load from sender.balance: 1","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Store at sender.balance: 1","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Load from receiver.balance: 0","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Store at receiver.balance: 0","status":"","childrenList":[],"jumpToDefinition":[]}],"jumpToDefinition":[]},{"name":"(internal) Pool.deposit(amount=3)","status":"","childrenList":[{"name":"Load from Pool._status: 0","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Store at Pool._status: 2","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Load from Pool.asset: identity (0x978bbdb8)","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"balanceOf(address): UNRESOLVED AUTO summary @ unknownLocation","status":"DEFAULT HAVOC","childrenList":[],"jumpToDefinition":[],"returnValue":"","variables":[]},{"name":"(internal) ERC20.totalSupply()","status":"","childrenList":[{"name":"Load from Pool._totalSupply: 9","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 0","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_status: 2 (changed)","status":"CONCRETE","childrenList":[],"jumpToDefinition":[],"changed":true},{"name":"_totalSupply: 9","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":3}],"jumpToDefinition":[],"returnValue":"9","variables":[]},{"name":"(internal) Pool.amountToShares(amount=3)","status":"","childrenList":[{"name":"Load from Pool.asset: identity (0x978bbdb8)","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"balanceOf(address): UNRESOLVED AUTO summary @ unknownLocation","status":"DEFAULT HAVOC","childrenList":[],"jumpToDefinition":[],"returnValue":"","variables":[]},{"name":"(internal) ERC20.totalSupply()","status":"","childrenList":[{"name":"Load from Pool._totalSupply: 9","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 0","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_status: 2","status":"CONCRETE","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_totalSupply: 9","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":4}],"jumpToDefinition":[],"returnValue":"9","variables":[]},{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 0","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_status: 2","status":"CONCRETE","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_totalSupply: 9","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":5}],"jumpToDefinition":[],"returnValue":"6","variables":[]},{"name":"Load from Pool.asset: identity (0x978bbdb8)","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"transferFrom(address,address,uint256): UNRESOLVED AUTO summary @ unknownLocation","status":"DEFAULT HAVOC","childrenList":[],"jumpToDefinition":[],"returnValue":"","variables":[]},{"name":"(internal) ERC20._mint(recipient=0xffff, amount=6)","status":"","childrenList":[{"name":"Load from Pool._totalSupply: 9","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Store at Pool._totalSupply: 15","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Load from Pool._balanceOf[0xffff]: 0","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Store at Pool._balanceOf[0xffff]: 6","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 6 (changed)","status":"HAVOC DEPENDENT","childrenList":[],"jumpToDefinition":[],"changed":true},{"name":"_status: 2","status":"CONCRETE","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_totalSupply: 15 (changed)","status":"HAVOC DEPENDENT","childrenList":[],"jumpToDefinition":[],"changed":true},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":6}],"jumpToDefinition":[],"returnValue":"","variables":[]},{"name":"Store at Pool._status: 1","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 6","status":"HAVOC DEPENDENT","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_status: 1 (changed)","status":"CONCRETE","childrenList":[],"jumpToDefinition":[],"changed":true},{"name":"_totalSupply: 15","status":"HAVOC DEPENDENT","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":7}],"jumpToDefinition":[],"returnValue":"6","variables":[]}],"jumpToDefinition":[],"returnValue":"6","variables":[]}],"jumpToDefinition":[]},{"name":"balance_after = Pool.assetBalance()","status":"","childrenList":[{"name":"Pool.assetBalance()","status":"SUCCESS","childrenList":[{"name":"(internal) Pool.assetBalance()","status":"","childrenList":[{"name":"Load from Pool.asset: identity (0x978bbdb8)","status":"","childrenList":[],"jumpToDefinition":[]},{"name":"balanceOf(address): UNRESOLVED AUTO summary @ unknownLocation","status":"DEFAULT HAVOC","childrenList":[],"jumpToDefinition":[],"returnValue":"","variables":[]},{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 6","status":"HAVOC DEPENDENT","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_status: 1","status":"CONCRETE","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_totalSupply: 15","status":"HAVOC DEPENDENT","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":8}],"jumpToDefinition":[],"returnValue":"14","variables":[]}],"jumpToDefinition":[],"returnValue":"14","variables":[]}],"jumpToDefinition":[]},{"name":"assert balance_after == balance_before + amount","status":"","childrenList":[{"name":"balance_after == balance_before + amount","status":"","childrenList":[{"name":"balance_after","status":"","childrenList":[],"jumpToDefinition":[],"returnValue":"14","variables":[]},{"name":"balance_before + amount","status":"","childrenList":[{"name":"balance_before","status":"","childrenList":[],"jumpToDefinition":[],"returnValue":"15","variables":[]},{"name":"amount","status":"","childrenList":[],"jumpToDefinition":[],"returnValue":"3","variables":[]}],"jumpToDefinition":[],"returnValue":"18","variables":[]}],"jumpToDefinition":[],"returnValue":"false","variables":[]},{"name":"Storage State","status":"","childrenList":[{"name":"Pool","status":"","childrenList":[{"name":"_balanceOf[0xffff]: 6","status":"HAVOC DEPENDENT","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_status: 1","status":"CONCRETE","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"_totalSupply: 15","status":"HAVOC DEPENDENT","childrenList":[],"jumpToDefinition":[],"changed":false},{"name":"asset: identity (0x978bbdb8)","status":"HAVOC","childrenList":[],"jumpToDefinition":[],"changed":false}],"jumpToDefinition":[],"storageId":null}],"jumpToDefinition":[],"storageId":9}],"jumpToDefinition":[]}],"jumpToDefinition":[],"returnValue":"","variables":[]},"variables":[{"e.msg.sender":"0xffff","jumpToDefinition":[]},{"e.msg.value":"0","jumpToDefinition":[]},{"e.tx.origin":"0x401","jumpToDefinition":[]},{"e.block.coinbase":"0x402","jumpToDefinition":[]},{"e.block.difficulty":"10","jumpToDefinition":[]},{"e.block.gaslimit":"8","jumpToDefinition":[]},{"e.block.number":"7","jumpToDefinition":[]},{"e.block.timestamp":"5","jumpToDefinition":[]},{"amount":"3","jumpToDefinition":[]},{"balance_before":"15","jumpToDefinition":[]},{"balance_after":"14","jumpToDefinition":[]},{"identity":"identity (0x978bbdb8)","jumpToDefinition":[]}]}